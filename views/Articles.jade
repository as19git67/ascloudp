extends layout
block content
    style [data-toggle="modal"]:hover {cursor: pointer;}
    if canEdit
        style .articleNew:hover { cursor: pointer; }
    if error
        p.text-danger #{error}
    h1
        u #{page.EntityNamePlural}
        if canEdit
            | &nbsp;
            span(class='articleNew' data-pageid='#{page.Name}') +

    if !Records || Records.length == 0
        p.text-info Keine #{page.EntityNamePlural} zum Anzeigen

    each record in Records
        div(class="media articleListItem", data-id='#{record.article_id}')
            a(id="#{record.article_id}")
            if record.image
                div.media-left
                    a(href="#", data-toggle="modal", data-target="#modal_for_article_#{record.article_id}")
                        img(src="#{record.image}?type=thumbnail")
            div.media-body
                h4.media-heading
                    if record.title
                        a(href="#", data-toggle="modal", data-target="#modal_for_article_#{record.article_id}") #{record.title}
                        if canEdit
                            span.glyphicon.glyphicon-edit(data-id='#{record.article_id}')
                    else
                        span(data-toggle="modal", data-target="#modal_for_article_#{record.article_id}") Artikel: #{record.article_id}
                        if canEdit
                            span.glyphicon.glyphicon-edit(data-id='#{record.article_id}')
                    if page.socialShareEnabled
                        div(class="social-likes", data-url="##{record.article_id}", data-title="#{record.title}")
                            div(class="facebook twitter", title="Artikel auf Facebook teilen")
                            //div(class="twitter", title="Diesen Artikel auf Twitter posten")
                if record.notPublished
                    p.text-warning
                        strong Dieser Artikel wird von #{record.publish_start_formatted} bis #{record.publish_end_formatted} veröffentlicht
                if record.date_formatted
                    p.small #{record.date_formatted}
                if record.leadText && !record.rawHtml
                    p(data-toggle="modal", data-target="#modal_for_article_#{record.article_id}") #{record.leadText}
                if record.leadText && record.rawHtml
                    p #{record.leadText}
                        if record.rawHtml
                            a(href="#", data-toggle="modal", data-target="#modal_for_article_#{record.article_id}") Mehr...
        div(class="modal fade", id='modal_for_article_#{record.article_id}', tabindex="-1", role="dialog", aria-labelledby="myLargeModalLabel", aria-hidden="true")
            div(class="modal-dialog modal-lg")
                div.modal-content
                    div.modal-header
                        button(type="button", class="close", data-dismiss="modal", aria-label="Close")
                            span(aria-hidden="true") &times;
                        h3(class="modal-title") #{record.title}
                        if record.author
                            p.small Von: #{record.author}, #{record.date_formatted}
                        if record.leadText
                            p(data-toggle="modal", data-target="#modal_for_article_#{record.article_id}") #{record.leadText}
                        if page.XXsocialShareEnabled
                            div(class="social-likes", data-url="##{record.article_id}", data-title="#{record.title}")
                                div(class="facebook twitter", title="Artikel posten")
                                //div(class="twitter", title="Diesen Artikel auf Twitter posten")
                    div.modal-body
                        div.container-fluid
                            div.row
                                | !{record.rawHtml}
                    div.modal-footer
                        button(data-dismiss="modal", class="btn btn-default") Schließen
    include common-js.jade
        //script(src="/lib/jquery-2.1.1.min.js", type="text/javascript")
        //script(src="/lib/bootstrap/dist/js/bootstrap.min.js", type="text/javascript")
        //script(src="/javascripts/adjustNavbar.js", type="text/javascript")
        //script(src="/lib/underscore-1.7.0/underscore.js", type="text/javascript")
        //script(src="/lib/moment-2.10.2/moment-with-locales.js", type="text/javascript")
        //script(src="/lib/moment-timezone-0.3.0-2014j/moment-timezone-with-data.js", type="text/javascript")
        ////script(src="/lib/eonasdan-bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js")
        //script(src="/lib/jquery.validate.min.js", type="text/javascript")
        //script(src="/lib/jquery.validate.unobtrusive.min.js", type="text/javascript")

    if canEdit
        script(src="/lib/angular-1.3.8/angular.js", type="text/javascript")
        script(src="/lib/angular-1.3.8/angular-cookies.js", type="text/javascript")
        script(src="/lib/angular-translate/angular-translate.min.js", type="text/javascript")
        script(src="/lib/angular-bootstrap/ui-bootstrap.js", type="text/javascript")
        script(src="/lib/angular-bootstrap/ui-bootstrap-tpls.js", type="text/javascript")
        script(src="/lib/rho-0.2.3/rho.min.js", type="text/javascript")
        script(src="/lib/flow-2.9.0/flow.js", type="text/javascript")
        script(src="/lib/ng-flow-2.6.0/ng-flow.js", type="text/javascript")
        include ArticleTemplate.html
        script(src="/javascripts/ArticlesApp.js", type="text/javascript")
    if page.socialShareEnabled
        link(rel='stylesheet', href='/lib/social-likes/social-likes_classic.css')
        script(src="/lib/social-likes/social-likes.min.js", type="text/javascript")
        script(src="/javascripts/applySocialShare.js", type="text/javascript")

