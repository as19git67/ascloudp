extends layout
block content
    if canEdit
        style .calendarNew:hover {cursor: pointer;}
    if error
        p.text-danger #{error}
    h1
        u #{page.EntityNamePlural}
        if canEdit
            | &nbsp;
            span(class='calendarNew' data-pageid='#{page.Name}') +
    if !Records || Records.length == 0
        p.text-info Keine #{page.EntityNamePlural} zum Anzeigen

    each record in Records
        div(class="row calendarListItem", data-id='#{record.id}')
            div(class="col-md-12 col-xs-12")
                div(style="padding-left: 3px;margin-top:2px;margin-bottom:2px;background-color:#fafafa;")
                    strong(style="padding-bottom:2px;padding-top:1px;font-size: 1.1em") #{record.event_start_date_formatted} TZ: #{record.timezone}
                    if canEdit
                        span.glyphicon.glyphicon-edit(data-id='#{record.id}')
                    if record.notPublished
                        p.small
                            span.text-warning
                                strong Dieser Eintrag wird von #{record.publish_start_formatted} bis #{record.publish_end_formatted} ver√∂ffentlicht
            div(class="col-md-1 col-xs-2", style="text-align: right;border-right-width:1px;border-right-color:lightgray;border-right-style:solid")
                | #{record.event_start_time_formatted}
                br
                span(style="color: gray") #{record.event_end_time_formatted}
            div(class="col-md-11 col-xs-10")
                | #{record.Title}
                if record.Description
                        | :&nbsp #{record.Description}
                if record.Location
                    br
                    span(style="color: gray") #{record.Location}
    if icalUrl
        div(class="col-md-12 col-xs-12")
            hr
            a(href="#{icalUrl}") Diesen Kalender als iCal importieren
    if canEdit
        script(src="/lib/underscore-1.7.0/underscore.js", type="text/javascript")
        script(src="/lib/moment-2.10.2/moment-with-locales.js", type="text/javascript")
        script(src="/lib/moment-timezone-0.3.0-2014j/moment-timezone-with-data.js", type="text/javascript")
        script(src="/lib/angular-1.3.8/angular.js", type="text/javascript")
        script(src="/lib/angular-1.3.8/i18n/angular-locale_de-de.js", type="text/javascript")
        script(src="/lib/angular-1.3.8/angular-cookies.js", type="text/javascript")
        script(src="/lib/angular-translate/angular-translate.min.js", type="text/javascript")
        script(src="/lib/angular-bootstrap/ui-bootstrap.js", type="text/javascript")
        script(src="/lib/angular-bootstrap/ui-bootstrap-tpls.js", type="text/javascript")
        script(src="/lib/jstz-1.0.4/jstz.min.js", type="text/javascript")
        include CalendarTemplate.html
        script(src="/javascripts/CalendarApp.js", type="text/javascript")
