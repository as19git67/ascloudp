extends layout
block content
    if canEdit
        style .calendarNew:hover {cursor: pointer;}
    if error
        p.text-danger #{error}
    h1
        u #{page.EntityNamePlural}
        if canEdit
            | &nbsp;
            span(class='calendarNew' data-pageid='#{page.Name}') +
    if !Records || Records.length == 0
        p.text-info Keine #{page.EntityNamePlural} zum Anzeigen

    each record in Records
        div(class="row calendarListItem", data-id='#{record.id}')
            div(class="col-md-12 col-xs-12")
                div(style="padding-left: 3px;margin-top:2px;margin-bottom:2px;background-color:#fafafa;")
                    strong(style="padding-bottom:2px;padding-top:1px;font-size: 1.1em") #{record.event_start_date_formatted}
            div(class="col-md-1 col-xs-2", style="text-align: right;border-right-width:1px;border-right-color:lightgray;border-right-style:solid")
                | #{record.event_start_time_formatted}
                br
                span(style="color: gray") #{record.event_end_time_formatted}
            div(class="col-md-11 col-xs-10")
                | #{record.Title}:&nbsp
                if record.Description
                        | #{record.Description}
                if record.Location
                    br
                    span(style="color: gray") #{record.Location}
    if icalUrl
        div(class="col-md-12 col-xs-12")
            hr
            a(href="#{icalUrl}") Diesen Kalender als iCal importieren
    if canEdit
        script(src="/lib/underscore-1.7.0/underscore.js", type="text/javascript")
        script(src="/lib/handlebars-v2.0.0.js", type="text/javascript")
        //script(src="/lib/require-2.1.15/require.js", type="text/javascript")
        script(src="/lib/backbone-1.1.2/backbone.js", type="text/javascript")
        script(src="/lib/backbone.marionette-2.2.0/backbone.marionette.js", type="text/javascript")
        script(src="/lib/Backbone.ModelBinder/Backbone.ComponentBinder.js", type="text/javascript")
        script(src="/javascripts/Backbone.ComponentBinderDatePicker.js", type="text/javascript")
        script(src="/javascripts/Backbone.ComponentBinderButton.js", type="text/javascript")
        script(src="/lib/Backbone.ModelBinder/Backbone.ModelBinder.js", type="text/javascript")

        include CalendarTemplate.html
        script(src="/javascripts/CalendarApp.js", type="text/javascript")
